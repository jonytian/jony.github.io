<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Page 2 › 子非鱼</title>
  <meta name="author" content="jony">
  
  <meta name="description" content="Test description">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  
  <meta property="og:site_name" content="子非鱼"/>

  
    <meta property="og:image" content=""/>
  

  <link href="/favicon.png" rel="icon">
  <link rel="alternate" href="/atom.xml" title="子非鱼" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
  

<meta name="generator" content="Hexo 5.1.1"></head>


<body>
  <header id="header"><div class="meta inner">
  <h1><a href="/">子非鱼</a></h1>
  <h2><a href="/"></a></h2>
  <nav id="main-nav">
    <ul>
      
      <li><a href="/about">About</a></li>
      
      <li><a href="/archives">Archives</a></li>
      
      <li><a href="/atom.xml">RSS</a></li>
      
    </ul>
    <div class="clearfix"></div>
  </nav>
</div>
<div class="clearfix"></div>
</header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper">
  <article class="post">
  <div class="post-content">
    <header>
      
  
    <h1 class="title"><a href="/2018/04/08/JVM/2018-04-08-1_Java虚拟机内存分配和溢出/">Java虚拟机内存分配和溢出</a></h1>
  

      
        <time datetime="2018-04-08T07:33:00.000Z">2018-04-08</time>
      
    </header>
    <div class="entry">
      
        <!-- image url 
https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/blogImages
　　首行缩进
<font color="red">  </font>
-->

<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>由于虚拟机自动内存管理机制的帮助下，不需要为每一个new出来的对象，去写delete/free代码。不容易出现内存泄漏和内存溢出的问题，</p>
<p><font color="red"><strong>但是如果一旦出现问题，那将是非常可怕的</strong> </font>，如果不了解虚拟机是怎么使用内存的，那么排查错误将会成为一项非常艰难的工资。</p>
<h2 id="误区"><a href="#误区" class="headerlink" title="误区"></a>误区</h2><p>经常有人讲java内存区分为堆内存和栈内存，这种分发比较粗糙，只能说明大多数程序员最密切的就是这两块</p>
<h2 id="1、Java虚拟机内存分配"><a href="#1、Java虚拟机内存分配" class="headerlink" title="1、Java虚拟机内存分配"></a>1、Java虚拟机内存分配</h2><h3 id="1-1、程序计数器（线程私有）"><a href="#1-1、程序计数器（线程私有）" class="headerlink" title="1.1、程序计数器（线程私有）"></a>1.1、程序计数器（线程私有）</h3><p>较小的内存空间，可以当做当前线程所执行字节码的行号指示器，每个线程都有自己的行号指示器，互补干扰，因此这部分内存区域也叫作私有区域</p>
<h3 id="1-2、Java虚拟机栈（线程私有）"><a href="#1-2、Java虚拟机栈（线程私有）" class="headerlink" title="1.2、Java虚拟机栈（线程私有）"></a>1.2、Java虚拟机栈（线程私有）</h3><p>这里其实就是程序员通俗意义上的栈区，<font color="red">存放基本的数据类型和，对象的引用。（函数多的参数值，局部变量）<br> </font><br> <br/><br> <font color="red">每次在方法执行的同时，都会创建一个栈帧，用来存储局部变量表，操作数栈（可以理解成数字），动态链接、方法出入口等信息。每一个方法执行的时候，就对应着一个栈帧在虚拟机栈中入栈和出栈的过程 </font></p>
<h4 id="1-1、这个区域出现的异常情况有两种"><a href="#1-1、这个区域出现的异常情况有两种" class="headerlink" title="1.1、这个区域出现的异常情况有两种"></a>1.1、这个区域出现的异常情况有两种</h4><p>1、如果虚拟机请求栈深度大于虚拟机所允许的深度，将抛出 StackOverflowError异常</p>
<p>2、如果虚拟机栈可以动态扩展（当前大部分虚拟机都可以）如果扩展时无法申请到足够的内存，将飘出OutOfMemoryError</p>
<h3 id="1-3、本地方法栈"><a href="#1-3、本地方法栈" class="headerlink" title="1.3、本地方法栈"></a>1.3、本地方法栈</h3><p>本地方法栈和虚拟机栈区别是，虚拟机栈为执行的java方法服务，而本地方法栈为Native方法服务。它也会抛出StackOverflowError和OutOfMemoryError异常</p>
<h3 id="1-4、Java堆（线程共享）"><a href="#1-4、Java堆（线程共享）" class="headerlink" title="1.4、Java堆（线程共享）"></a>1.4、Java堆（线程共享）</h3><p>Java堆是被所有线程共享的区域，在虚拟机启动时候创建，<font color="red">  此区域的唯一目标就是存放对象实例和数组，</font><br><font color="red"> Java堆是垃圾收集器管理的主要区域 </font></p>
<h3 id="1-5、方法区（线程共享）"><a href="#1-5、方法区（线程共享）" class="headerlink" title="1.5、方法区（线程共享）"></a>1.5、方法区（线程共享）</h3><p>方法去也是各个线程共享的内存区域，它用于<font color="red">存储以被虚拟机加载的类信息，常亮，静态常量,以及访问修饰符，字段描述，方法描述等</font>，即时编译后的代码等数据。，也叫永久代</p>
<h4 id="1-5-1、运行时常量池"><a href="#1-5-1、运行时常量池" class="headerlink" title="1.5.1、运行时常量池"></a>1.5.1、运行时常量池</h4><p>用于存放编译器生成的各种字面量和符号引用</p>
<h3 id="图解"><a href="#图解" class="headerlink" title="图解"></a>图解</h3><p>1、所有的内存</p>
<p><img src="markdownImage/WX20180409-110305@2x.png" alt="WX20180409-110305@2x"></p>
<h2 id="2、实战-OutOfMemoryError异常"><a href="#2、实战-OutOfMemoryError异常" class="headerlink" title="2、实战 OutOfMemoryError异常"></a>2、实战 OutOfMemoryError异常</h2><h3 id="2-1、java堆溢出"><a href="#2-1、java堆溢出" class="headerlink" title="2.1、java堆溢出"></a>2.1、java堆溢出</h3><h4 id="2-1-1、测试代码"><a href="#2-1-1、测试代码" class="headerlink" title="2.1.1、测试代码"></a>2.1.1、测试代码</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaHeap</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">OOMObject</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List&lt;OOMObject&gt; oomObjects = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>)&#123;</span><br><span class="line">            oomObjects.add(<span class="keyword">new</span> OOMObject());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>过一段时间之后报下面错误</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Exception in thread <span class="string">&quot;main&quot;</span> java.lang.OutOfMemoryError: Java heap space</span><br><span class="line">	at java.util.Arrays.copyOf(Arrays.java:<span class="number">3210</span>)</span><br><span class="line">	at java.util.Arrays.copyOf(Arrays.java:<span class="number">3181</span>)</span><br><span class="line">	at java.util.ArrayList.grow(ArrayList.java:<span class="number">265</span>)</span><br><span class="line">	at java.util.ArrayList.ensureExplicitCapacity(ArrayList.java:<span class="number">239</span>)</span><br><span class="line">	at java.util.ArrayList.ensureCapacityInternal(ArrayList.java:<span class="number">231</span>)</span><br><span class="line">	at java.util.ArrayList.add(ArrayList.java:<span class="number">462</span>)</span><br><span class="line">	at com.hlj.jvm.memory.JavaHeap.main(JavaHeap.java:<span class="number">19</span>)</span><br><span class="line"></span><br><span class="line">Process finished with exit code <span class="number">1</span></span><br></pre></td></tr></table></figure>

<h4 id="2-1-2、异常分析和解决"><a href="#2-1-2、异常分析和解决" class="headerlink" title="2.1.2、异常分析和解决"></a>2.1.2、异常分析和解决</h4><p>可以看到上面的提示<code>Java heap space</code> java堆内存</p>

      
    </div>
      
        
        
      
      <div class="clearfix"></div>
      </footer>
  </div>
</article>





  <article class="post">
  <div class="post-content">
    <header>
      
  
    <h1 class="title"><a href="/2018/04/08/Java/2018-03-29-1_SpringBoot启动加载数据CommandLineRunner/">SpringBoot启动加载数据CommandLineRunner</a></h1>
  

      
        <time datetime="2018-04-08T07:33:00.000Z">2018-04-08</time>
      
    </header>
    <div class="entry">
      
        <!-- image url 
https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/blogImages
　　首行缩进
<font color="red">  </font>
-->

<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>　　实际应用中，我们会有在项目服务启动的时候就去加载一些数据或做一些事情这样的需求。  为了解决这样的问题，Spring Boot 为我们提供了一个方法，通过实现接口 CommandLineRunner 来实现。</p>
<p>order越小越先执行</p>
<h2 id="1、order为1"><a href="#1、order为1" class="headerlink" title="1、order为1"></a>1、order为1</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hlj.commandlinerunner.comhljcommandlinerunner.orlder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.CommandLineRunner;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.annotation.Order;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> HealerJean</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2018/3/29  下午6:18.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Order(value=1)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyStartupRunner1</span> <span class="keyword">implements</span> <span class="title">CommandLineRunner</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(String... args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;服务启动执行，执行加载数据等操作 11111111 &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="2、order为2"><a href="#2、order为2" class="headerlink" title="2、order为2"></a>2、order为2</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.hlj.commandlinerunner.comhljcommandlinerunner.orlder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.boot.CommandLineRunner;</span><br><span class="line"><span class="keyword">import</span> org.springframework.core.annotation.Order;</span><br><span class="line"><span class="keyword">import</span> org.springframework.stereotype.Component;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Description</span></span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Author</span> HealerJean</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@Date</span> 2018/3/29  下午6:18.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Component</span></span><br><span class="line"><span class="meta">@Order(value=2)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyStartupRunner2</span> <span class="keyword">implements</span> <span class="title">CommandLineRunner</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">(String... args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;服务启动执行，执行加载数据等操作 22222222 &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="3、启动SpringBoot"><a href="#3、启动SpringBoot" class="headerlink" title="3、启动SpringBoot"></a>3、启动SpringBoot</h2><p><img src="https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/blogImages/WX20180329-182220.png" alt="WX20180329-182220"></p>
<p><br/><br/><br/><br>如果满意，请打赏博主任意金额，感兴趣的请下方留言吧。可与博主自由讨论哦</p>
<table>
<thead>
<tr>
<th align="center">支付包</th>
<th align="center">微信</th>
<th align="center">微信公众号</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><img src="https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/assets/img/tctip/alpay.jpg" alt="支付宝"></td>
<td align="center"><img src="https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/assets/img/tctip/weixin.jpg" alt="微信"></td>
<td align="center"><img src="https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/assets/img/my/qrcode_for_gh_a23c07a2da9e_258.jpg" alt="微信公众号"></td>
</tr>
</tbody></table>
<!-- Gitalk 评论 start  -->

<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk@latest/dist/gitalk.min.js"></script> 
<div id="gitalk-container"></div>    
 <script type="text/javascript">
    var gitalk = new Gitalk({
        clientID: `1d164cd85549874d0e3a`,
        clientSecret: `527c3d223d1e6608953e835b547061037d140355`,
        repo: `HealerJean.github.io`,
        owner: 'HealerJean',
        admin: ['HealerJean'],
        id: 'synrCiOxeZMrB4Qr',
    });
    gitalk.render('gitalk-container');
</script> 

<!-- Gitalk end -->


      
    </div>
      
        
        
      
      <div class="clearfix"></div>
      </footer>
  </div>
</article>





  <article class="post">
  <div class="post-content">
    <header>
      
  
    <h1 class="title"><a href="/2018/04/08/Java/2018-05-26-Spring-Boot Web 应用加速/">Spring Boot Web 应用加速</a></h1>
  

      
        <time datetime="2018-04-08T07:33:00.000Z">2018-04-08</time>
      
    </header>
    <div class="entry">
      
        <h1 id="Spring-Boot-Web-应用加速"><a href="#Spring-Boot-Web-应用加速" class="headerlink" title="Spring Boot Web 应用加速"></a>Spring Boot Web 应用加速</h1><p>默认情况下，Spring Boot Web 应用会装配一些功能组件 Bean。</p>
<p>在大多数 Web 应用场景下，可以选择性地关闭一下自动装配的Spring 组件 Bean，以达到提升性能的目的。</p>
<h2 id="配置项优化"><a href="#配置项优化" class="headerlink" title="配置项优化"></a>配置项优化</h2><h3 id="Spring-Boot-Web-应用加速-完整配置项"><a href="#Spring-Boot-Web-应用加速-完整配置项" class="headerlink" title="Spring Boot Web 应用加速 完整配置项"></a>Spring Boot Web 应用加速 完整配置项</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">management.add-application-context-header</span> = <span class="string">false</span></span><br><span class="line"><span class="meta">spring.mvc.formcontent.putfilter.enabled</span> = <span class="string">false</span></span><br><span class="line"></span><br><span class="line"><span class="meta">spring.autoconfigure.exclude</span> = <span class="string">org.springframework.boot.autoconfigure.admin.SpringApplicationAdminJmxAutoConfiguration,\</span></span><br><span class="line">org.springframework.boot.autoconfigure.jmx.JmxAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.gson.GsonAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jdbc.XADataSourceAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.jdbc.JndiDataSourceAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.transaction.jta.JtaAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.websocket.WebSocketAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.websocket.WebSocketMessagingAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.freemarker.FreeMarkerAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.groovy.template.GroovyTemplateAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.mustache.MustacheAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.mail.MailSenderAutoConfiguration,\</span><br><span class="line">org.springframework.boot.autoconfigure.mail.MailSenderValidatorAutoConfiguration,\</span><br><span class="line">org.springframework.boot.actuate.autoconfigure.TraceRepositoryAutoConfiguration,\</span><br><span class="line">org.springframework.boot.actuate.autoconfigure.TraceWebFilterAutoConfiguration,\</span><br><span class="line"><span class="attr">org.springframework.boot.actuate.autoconfigure.MetricFilterAutoConfiguration</span></span><br></pre></td></tr></table></figure>

<h3 id="配置项汇总"><a href="#配置项汇总" class="headerlink" title="配置项汇总"></a>配置项汇总</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.autoconfigure.exclude</span> = <span class="string">org.springframework.boot.actuate.autoconfigure.TraceRepositoryAutoConfiguration,\</span></span><br><span class="line">org.springframework.boot.actuate.autoconfigure.TraceWebFilterAutoConfiguration,\</span><br><span class="line"><span class="attr">org.springframework.boot.actuate.autoconfigure.MetricFilterAutoConfiguration</span></span><br></pre></td></tr></table></figure>

<h3 id="关闭-Web-请求跟踪-自动装配"><a href="#关闭-Web-请求跟踪-自动装配" class="headerlink" title="关闭 Web 请求跟踪 自动装配"></a>关闭 Web 请求跟踪 自动装配</h3><h4 id="org-springframework-boot-actuate-autoconfigure-TraceWebFilterAutoConfiguration"><a href="#org-springframework-boot-actuate-autoconfigure-TraceWebFilterAutoConfiguration" class="headerlink" title="org.springframework.boot.actuate.autoconfigure.TraceWebFilterAutoConfiguration"></a><code>org.springframework.boot.actuate.autoconfigure.TraceWebFilterAutoConfiguration</code></h4><p>顾名思义，该自动装配用跟踪 Web 请求，通过Servlet Filter <code>org.springframework.boot.actuate.trace.WebRequestTraceFilter</code> 记录请求的信息（如：请求方法、请求头以及请求路径等），其计算的过程存在一定的开销，使用场景罕见，故可选择关闭。</p>
<ul>
<li>配置项</li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.autoconfigure.exclude</span> = <span class="string">org.springframework.boot.actuate.autoconfigure.TraceWebFilterAutoConfiguration</span></span><br></pre></td></tr></table></figure>


<h4 id="org-springframework-boot-actuate-autoconfigure-TraceRepositoryAutoConfiguration"><a href="#org-springframework-boot-actuate-autoconfigure-TraceRepositoryAutoConfiguration" class="headerlink" title="org.springframework.boot.actuate.autoconfigure.TraceRepositoryAutoConfiguration"></a><code>org.springframework.boot.actuate.autoconfigure.TraceRepositoryAutoConfiguration</code></h4><p>当<code>org.springframework.boot.actuate.autoconfigure.TraceWebFilterAutoConfiguration</code>关闭后，其请求信息存储介质<code>org.springframework.boot.actuate.trace.TraceRepository</code>没有存在的必要，故可选择关闭。</p>
<ul>
<li>配置项</li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.autoconfigure.exclude</span> = <span class="string">org.springframework.boot.actuate.autoconfigure.TraceRepositoryAutoConfiguration</span></span><br></pre></td></tr></table></figure>


<h3 id="关闭-Web-请求结果指标-自动装配"><a href="#关闭-Web-请求结果指标-自动装配" class="headerlink" title="关闭 Web 请求结果指标 自动装配"></a>关闭 Web 请求结果指标 自动装配</h3><h4 id="org-springframework-boot-actuate-autoconfigure-MetricFilterAutoConfiguration"><a href="#org-springframework-boot-actuate-autoconfigure-MetricFilterAutoConfiguration" class="headerlink" title="org.springframework.boot.actuate.autoconfigure.MetricFilterAutoConfiguration"></a><code>org.springframework.boot.actuate.autoconfigure.MetricFilterAutoConfiguration</code></h4><p>该组件将自动装配<code>org.springframework.boot.actuate.autoconfigure.MetricsFilter</code>，该 Filter</p>
<p>主要记录Web 请求结果指标（如：相应状态码、请求方法执行时间等），该信息一定程度上与反向代理服务器（nginx）功能重叠，故可选择关闭。</p>
<ul>
<li>配置项</li>
</ul>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.autoconfigure.exclude</span> = <span class="string">org.springframework.boot.actuate.autoconfigure.MetricFilterAutoConfiguration</span></span><br></pre></td></tr></table></figure>




<h3 id="可关闭-Servlet-Web-组件"><a href="#可关闭-Servlet-Web-组件" class="headerlink" title="可关闭 Servlet Web 组件"></a>可关闭 Servlet Web 组件</h3><h4 id="org-springframework-web-filter-HttpPutFormContentFilter"><a href="#org-springframework-web-filter-HttpPutFormContentFilter" class="headerlink" title="org.springframework.web.filter.HttpPutFormContentFilter"></a><code>org.springframework.web.filter.HttpPutFormContentFilter</code></h4><ul>
<li>引入版本</li>
</ul>
<p><code>org.springframework.web.filter.HttpPutFormContentFilter</code> 由 Spring<br>Framework 3.1 版本引入，分发在 <code>org.springframework:spring-web</code> 中。</p>
<ul>
<li>使用场景</li>
</ul>
<p>通常 Web 场景中，浏览器通过 HTTP <code>GET</code> 或者 <code>POST</code> 请求 提交 Form 数据，而非浏览<br>器客户端（如应用程序）可能通过 HTTP <code>PUT</code> 请求来实现。</p>
<p>当 HTTP 请求头<code>Content-Type</code> 为 <code>application/x-www-form-urlencoded</code> 时<br>，Form 数据被 encoded。而 Servlet 规范中， <code>ServletRequest.getParameter*()</code><br>方法仅对 HTTP <code>POST</code> 方法支持请求参数的获取，如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> intetfacce ServletRequest &#123;</span><br><span class="line"></span><br><span class="line">    ......</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getParameter</span><span class="params">(String name)</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Enumeration&lt;String&gt; <span class="title">getParameterNames</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String[] getParameterValues(String name);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Map&lt;String, String[]&gt; getParameterMap();</span><br><span class="line"></span><br><span class="line">    ......</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>故 以上方法无法支持 HTTP <code>PUT</code> 或 HTTP <code>PATCH</code> 请求方法（请求头<code>Content-Type</code><br>为<code>application/x-www-form-urlencoded</code>）。</p>
<p><code>org.springframework.web.filter.HttpPutFormContentFilter</code> 正是这种场景的解<br>决方案。</p>
<p>Spring Boot 默认场景下，将<br><code>org.springframework.web.filter.HttpPutFormContentFilter</code> 被<br><code>org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration</code> 自动<br>装配，以下为 Spring Boot 1.4.1.RELEASE 以及更好版本定义（可能存在一定的差异）：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ConditionalOnWebApplication</span></span><br><span class="line"><span class="meta">@ConditionalOnClass(&#123; Servlet.class, DispatcherServlet.class,</span></span><br><span class="line"><span class="meta">		WebMvcConfigurerAdapter.class &#125;)</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean(WebMvcConfigurationSupport.class)</span></span><br><span class="line"><span class="meta">@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE + 10)</span></span><br><span class="line"><span class="meta">@AutoConfigureAfter(&#123; DispatcherServletAutoConfiguration.class,</span></span><br><span class="line"><span class="meta">		ValidationAutoConfiguration.class &#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebMvcAutoConfiguration</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    ......</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@ConditionalOnMissingBean(HttpPutFormContentFilter.class)</span></span><br><span class="line">    <span class="meta">@ConditionalOnProperty(prefix = &quot;spring.mvc.formcontent.putfilter&quot;, name = &quot;enabled&quot;, matchIfMissing = true)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> OrderedHttpPutFormContentFilter <span class="title">httpPutFormContentFilter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> OrderedHttpPutFormContentFilter();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ......</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>综上所述，<code>org.springframework.web.filter.HttpPutFormContentFilter</code> 在绝大<br>多数 Web 使用场景下为非必须组件。</p>
<ul>
<li>配置项</li>
</ul>
<p>如果应用依赖 Spring Boot 版本 为 1.4.1.RELEASE 以及更高的版本，可通过如下配置，<br>进行将 <code>org.springframework.web.filter.HttpPutFormContentFilter</code> 关闭：</p>
<figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.mvc.formcontent.putfilter.enabled</span> = <span class="string">false</span></span><br></pre></td></tr></table></figure>


<h4 id="org-springframework-web-filter-HiddenHttpMethodFilter"><a href="#org-springframework-web-filter-HiddenHttpMethodFilter" class="headerlink" title="org.springframework.web.filter.HiddenHttpMethodFilter"></a><code>org.springframework.web.filter.HiddenHttpMethodFilter</code></h4><ul>
<li>引入版本</li>
</ul>
<p><code>org.springframework.web.filter.HiddenHttpMethodFilter</code> 由 Spring<br>Framework 3.0 版本引入，分发在 <code>org.springframework:spring-web</code> 中。</p>
<ul>
<li>使用场景</li>
</ul>
<p>当 Web 服务端同一资源（URL）提供了多请求方法的实现，例如 URI ：/update 提供了<br>HTTP <code>POST</code> 以及 HTTP <code>PUT</code> 实现），通常 Web 场景中，浏览器仅支持 HTTP <code>GET</code><br>或者 <code>POST</code> 请求方法，这样的话，浏览器无法发起 HTTP <code>PUT</code> 请求。</p>
<p>为了浏览器可以消费 HTTP <code>PUT</code> 资源， 需要在服务端将 HTTP <code>POST</code> 转化成<br>HTTP <code>PUT</code> 请求，为了解决这类问题，Spring 引入<br><code>org.springframework.web.filter.HiddenHttpMethodFilter</code> Web 组件。</p>
<p>当浏览器 发起 HTTP <code>POST</code> 请求时，可通过增加请求参数（默认参数名称：”_method”）<br>的方式，进行HTTP 请求方法切换，<br><code>org.springframework.web.filter.HiddenHttpMethodFilter</code> 获取参数”_method”<br>值后，将参数值作为 <code>HttpServletRequest#getMethod()</code>的返回值，给后续 <code>Servlet</code><br>实现使用。</p>
<p>出于通用性的考虑，<code>org.springframework.web.filter.HiddenHttpMethodFilter</code><br>通过调用 <code>#setMethodParam(String)</code> 方法，来修改转换请求方法的参数名称。</p>
<p>Spring Boot 默认场景下，将<br><code>org.springframework.web.filter.HttpPutFormContentFilter</code> 被<br><code>org.springframework.boot.autoconfigure.web.WebMvcAutoConfiguration</code> 自动<br>装配，以下为 Spring Boot 1.4.1.RELEASE 以及更好版本定义（可能存在一定的差异）：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@ConditionalOnWebApplication</span></span><br><span class="line"><span class="meta">@ConditionalOnClass(&#123; Servlet.class, DispatcherServlet.class,</span></span><br><span class="line"><span class="meta">		WebMvcConfigurerAdapter.class &#125;)</span></span><br><span class="line"><span class="meta">@ConditionalOnMissingBean(WebMvcConfigurationSupport.class)</span></span><br><span class="line"><span class="meta">@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE + 10)</span></span><br><span class="line"><span class="meta">@AutoConfigureAfter(&#123; DispatcherServletAutoConfiguration.class,</span></span><br><span class="line"><span class="meta">		ValidationAutoConfiguration.class &#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WebMvcAutoConfiguration</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    ......</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="meta">@ConditionalOnMissingBean(HiddenHttpMethodFilter.class)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> OrderedHiddenHttpMethodFilter <span class="title">hiddenHttpMethodFilter</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> OrderedHiddenHttpMethodFilter();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ......</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>综上所述，<code>org.springframework.web.filter.HiddenHttpMethodFilter</code> 也是特殊<br>场景下所需，故可以关闭之。</p>
<ul>
<li>配置项</li>
</ul>
<p>按目前最新的 Spring Boot 1.5.2.RELEASE 版本中实现，也没有提供类似<br><code>spring.mvc.formcontent.putfilter.enabled</code> 这样的配置项关闭，无法关闭。</p>

      
    </div>
      
        
        
      
      <div class="clearfix"></div>
      </footer>
  </div>
</article>





  <article class="post">
  <div class="post-content">
    <header>
      
  
    <h1 class="title"><a href="/2018/04/08/Java/2018-06-14-24_SprinBoot下载文件(网络url图片)资源代码/">SpringBoot下载文件资源代码</a></h1>
  

      
        <time datetime="2018-04-08T07:33:00.000Z">2018-04-08</time>
      
    </header>
    <div class="entry">
      
        <!-- image url 
https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/blogImages
　　首行缩进
<font color="red">  </font>
-->

<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>下载文件资源很简单，一开始学习Java web的时候，相信我们绝大多数人都学习过吧，所以这里直接上代码了。</p>
<h4 id="下载成功，主要是给response放入一个outputstream"><a href="#下载成功，主要是给response放入一个outputstream" class="headerlink" title="下载成功，主要是给response放入一个outputstream"></a>下载成功，主要是给response放入一个outputstream</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">@GetMapping(&quot;downUrlImage&quot;)</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">downUrlImage</span><span class="params">(String url, HttpServletResponse response)</span></span>&#123;</span><br><span class="line">    <span class="comment">//设置文件路径</span></span><br><span class="line">    response.setContentType(<span class="string">&quot;application/force-download&quot;</span>);<span class="comment">// 设置强制下载不打开</span></span><br><span class="line">    response.addHeader(<span class="string">&quot;Content-Disposition&quot;</span>, <span class="string">&quot;attachment;fileName=&quot;</span>+UUIDGenerator.generate() +<span class="string">&quot;jpg&quot;</span>);<span class="comment">// 设置文件名</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        URL urlStr = <span class="keyword">new</span> URL(url);</span><br><span class="line">        BufferedImage bufferedImage = ImageIO.read(urlStr);</span><br><span class="line"></span><br><span class="line">        ImageIO.write(bufferedImage, <span class="string">&quot;jpg&quot;</span>, response.getOutputStream());</span><br><span class="line">    &#125; <span class="keyword">catch</span> (MalformedURLException e) &#123;</span><br><span class="line">        log.info(e.getMessage());</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        log.info(e.getMessage());</span><br><span class="line">    &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">        log.info(e.getMessage());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p>测试 ：<br><a target="_blank" rel="noopener" href="http://localhost:8080/duodian/coupon/downUrlImage?url=http://localhost:8080/duodian/coupon/downUrlImage?url=http%253A%252F%252Fimg2.imgtn.bdimg.com%252Fit%252Fu%253D3588772980%252C2454248748%2526fm%253D27%2526gp%253D0.jpg">http://localhost:8080/duodian/coupon/downUrlImage?url=http%3A%2F%2Flocalhost%3A8080%2Fduodian%2Fcoupon%2FdownUrlImage%3Furl%3Dhttp%253A%252F%252Fimg2.imgtn.bdimg.com%252Fit%252Fu%253D3588772980%252C2454248748%2526fm%253D27%2526gp%253D0.jpg</a></p>
<p><br/><br/><br/><br>如果满意，请打赏博主任意金额，感兴趣的在微信转账的时候，添加博主微信哦， 请下方留言吧。可与博主自由讨论哦</p>
<table>
<thead>
<tr>
<th align="center">支付包</th>
<th align="center">微信</th>
<th align="center">微信公众号</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><img src="https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/assets/img/tctip/alpay.jpg" alt="支付宝"></td>
<td align="center"><img src="https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/assets/img/tctip/weixin.jpg" alt="微信"></td>
<td align="center"><img src="https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/assets/img/my/qrcode_for_gh_a23c07a2da9e_258.jpg" alt="微信公众号"></td>
</tr>
</tbody></table>
<!-- Gitalk 评论 start  -->

<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk@latest/dist/gitalk.min.js"></script> 
<div id="gitalk-container"></div>    
 <script type="text/javascript">
    var gitalk = new Gitalk({
        clientID: `1d164cd85549874d0e3a`,
        clientSecret: `527c3d223d1e6608953e835b547061037d140355`,
        repo: `HealerJean.github.io`,
        owner: 'HealerJean',
        admin: ['HealerJean'],
        id: '5uEdExlL8zfGVngY',
    });
    gitalk.render('gitalk-container');
</script> 

<!-- Gitalk end -->


      
    </div>
      
        
        
      
      <div class="clearfix"></div>
      </footer>
  </div>
</article>





  <article class="post">
  <div class="post-content">
    <header>
      
  
    <h1 class="title"><a href="/2018/04/08/Java/2018-06-02-22_SpringBoot_jar方式启动并配置日志文件/">SpringBoot_jar方式启动并配置日志文件</a></h1>
  

      
        <time datetime="2018-04-08T07:33:00.000Z">2018-04-08</time>
      
    </header>
    <div class="entry">
      
        <!-- image url 
https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/blogImages
　　首行缩进
<font color="red">  </font>
-->

<h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>正常启动 ,下面会选择<code>application.properties</code> 中配置默认的启动文件进行启动，下面这种情况不能根据实际情况进行启动项目</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">java jar admin-1.0-SNAPSHOT.jar </span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="1、测试环境和生产环境启动"><a href="#1、测试环境和生产环境启动" class="headerlink" title="1、测试环境和生产环境启动"></a>1、测试环境和生产环境启动</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">主要观察priperties中配置文件的名字</span><br><span class="line"></span><br><span class="line">测试环境：java -jar my-spring-boot.jar --spring.profiles.active&#x3D;test  </span><br><span class="line"></span><br><span class="line">生产环境：java -jar my-spring-boot.jar --spring.profiles.active&#x3D;prod  </span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="2、利用shell启动并配置log日志"><a href="#2、利用shell启动并配置log日志" class="headerlink" title="2、利用shell启动并配置log日志"></a>2、利用shell启动并配置log日志</h2><h4 id="2-1、测试库启动"><a href="#2-1、测试库启动" class="headerlink" title="2.1、测试库启动"></a>2.1、测试库启动</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line">   echo starting</span><br><span class="line">   java -jar admin-1.0-SNAPSHOT.jar --spring.profiles.active&#x3D;test  &gt; log.file 2&gt;log.error &amp;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="2-2、正式库启动"><a href="#2-2、正式库启动" class="headerlink" title="2.2、正式库启动"></a>2.2、正式库启动</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line">   echo starting</span><br><span class="line">   java -jar admin-1.0-SNAPSHOT.jar --spring.profiles.active&#x3D;prod &gt; log.file 2&gt;&amp;1 &amp;</span><br><span class="line">     </span><br></pre></td></tr></table></figure>



<h4 id="2-3、停止正在运行的项目"><a href="#2-3、停止正在运行的项目" class="headerlink" title="2.3、停止正在运行的项目"></a>2.3、停止正在运行的项目</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line">   PID&#x3D;$(ps -ef | grep admin-1.0-SNAPSHOT.jar | grep -v grep | awk &#39;&#123; print $2 &#125;&#39;)</span><br><span class="line">if [ -z &quot;$PID&quot; ]</span><br><span class="line">then</span><br><span class="line"></span><br><span class="line">    echo Application is already stopped</span><br><span class="line">else</span><br><span class="line"></span><br><span class="line">    echo kill $PID</span><br><span class="line"></span><br><span class="line">    kill $PID</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h4 id="2-4、重启项目"><a href="#2-4、重启项目" class="headerlink" title="2.4、重启项目"></a>2.4、重启项目</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#!&#x2F;bin&#x2F;bash</span><br><span class="line"></span><br><span class="line">echo stop application</span><br><span class="line"></span><br><span class="line">source stop.sh</span><br><span class="line"></span><br><span class="line">echo start application</span><br><span class="line"></span><br><span class="line">source start.sh</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="3、很简答吧"><a href="#3、很简答吧" class="headerlink" title="3、很简答吧"></a>3、很简答吧</h2><p><br/><br/><br/><br>如果满意，请打赏博主任意金额，感兴趣的在微信转账的时候，添加博主微信哦， 请下方留言吧。可与博主自由讨论哦</p>
<table>
<thead>
<tr>
<th align="center">支付包</th>
<th align="center">微信</th>
<th align="center">微信公众号</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><img src="https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/assets/img/tctip/alpay.jpg" alt="支付宝"></td>
<td align="center"><img src="https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/assets/img/tctip/weixin.jpg" alt="微信"></td>
<td align="center"><img src="https://raw.githubusercontent.com/HealerJean/HealerJean.github.io/master/assets/img/my/qrcode_for_gh_a23c07a2da9e_258.jpg" alt="微信公众号"></td>
</tr>
</tbody></table>
<!-- Gitalk 评论 start  -->

<link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk@latest/dist/gitalk.min.js"></script> 
<div id="gitalk-container"></div>    
 <script type="text/javascript">
    var gitalk = new Gitalk({
        clientID: `1d164cd85549874d0e3a`,
        clientSecret: `527c3d223d1e6608953e835b547061037d140355`,
        repo: `HealerJean.github.io`,
        owner: 'HealerJean',
        admin: ['HealerJean'],
        id: 't6TT8dlSAcO5WxXH',
    });
    gitalk.render('gitalk-container');
</script> 

<!-- Gitalk end -->


      
    </div>
      
        
        
      
      <div class="clearfix"></div>
      </footer>
  </div>
</article>





  <article class="post">
  <div class="post-content">
    <header>
      
  
    <h1 class="title"><a href="/2018/04/08/Java/IntelliJ IDEA配置与使用（图文教程）/">IntelliJ IDEA配置与使用（图文教程）</a></h1>
  

      
        <time datetime="2018-04-08T07:33:00.000Z">2018-04-08</time>
      
    </header>
    <div class="entry">
      
        <h2 id="前言：之前一直使用的MyEclipse，现在转战IntelliJ-IDEA"><a href="#前言：之前一直使用的MyEclipse，现在转战IntelliJ-IDEA" class="headerlink" title="前言：之前一直使用的MyEclipse，现在转战IntelliJ IDEA."></a>前言：之前一直使用的MyEclipse，现在转战IntelliJ IDEA.</h2><h2 id="一、IntelliJ配置"><a href="#一、IntelliJ配置" class="headerlink" title="一、IntelliJ配置"></a>一、IntelliJ配置</h2><h3 id="1-代码提示与补充"><a href="#1-代码提示与补充" class="headerlink" title="1.代码提示与补充"></a>1.代码提示与补充</h3><p><img src="https://img-blog.csdn.net/2018051810535189?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdWJpbjE5OTFsaXViaW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"><br>main,syso等快捷补全代码设置<br><img src="https://img-blog.csdn.net/20180518111652797?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdWJpbjE5OTFsaXViaW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"><br><img src="https://img-blog.csdn.net/20180519220051956?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdWJpbjE5OTFsaXViaW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"></p>
<h3 id="2-设置自动导包"><a href="#2-设置自动导包" class="headerlink" title="2.设置自动导包"></a>2.设置自动导包</h3><p><img src="https://img-blog.csdn.net/20180518111231729?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdWJpbjE5OTFsaXViaW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"></p>
<h3 id="3-设置字体"><a href="#3-设置字体" class="headerlink" title="3.设置字体"></a>3.设置字体</h3><p><img src="https://img-blog.csdn.net/20180518111240546?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdWJpbjE5OTFsaXViaW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"></p>
<h3 id="4-设置快捷键"><a href="#4-设置快捷键" class="headerlink" title="4.设置快捷键"></a>4.设置快捷键</h3><p>注意先选择Eclipse，当修改对应Code相关快捷键后，自动出现Eclipse copy<br><img src="https://img-blog.csdn.net/2018051811125451?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdWJpbjE5OTFsaXViaW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"></p>
<h3 id="5-设置字符码表"><a href="#5-设置字符码表" class="headerlink" title="5.设置字符码表"></a>5.设置字符码表</h3><p><img src="https://img-blog.csdn.net/20180518105433437?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdWJpbjE5OTFsaXViaW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"></p>
<h3 id="6-Tomcat服务器设置"><a href="#6-Tomcat服务器设置" class="headerlink" title="6.Tomcat服务器设置"></a>6.Tomcat服务器设置</h3><p><img src="https://img-blog.csdn.net/20180518111417262?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdWJpbjE5OTFsaXViaW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"><br><img src="https://img-blog.csdn.net/20180518111424648?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdWJpbjE5OTFsaXViaW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"><br><img src="https://img-blog.csdn.net/20180518173639583?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdWJpbjE5OTFsaXViaW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"></p>
<h3 id="7-maven设置"><a href="#7-maven设置" class="headerlink" title="7.maven设置"></a>7.maven设置</h3><p><img src="https://img-blog.csdn.net/20180518111548409?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdWJpbjE5OTFsaXViaW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"></p>
<h3 id="8-web目录的设置"><a href="#8-web目录的设置" class="headerlink" title="8.web目录的设置"></a>8.web目录的设置</h3><p><img src="https://img-blog.csdn.net/20180518115336481?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdWJpbjE5OTFsaXViaW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"><br>创建完之后注意修改目录的属性。选中目录后—》右击—》Mark Directory as —》选择相应的属性。</p>
<h2 id="二、IntelliJ-IDEA部署项目"><a href="#二、IntelliJ-IDEA部署项目" class="headerlink" title="二、IntelliJ IDEA部署项目"></a>二、IntelliJ IDEA部署项目</h2><h3 id="1-设置编译文件的输出目录"><a href="#1-设置编译文件的输出目录" class="headerlink" title="1.设置编译文件的输出目录"></a>1.设置编译文件的输出目录</h3><p>默认情况下<br><img src="https://img-blog.csdn.net/20180519221735268?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdWJpbjE5OTFsaXViaW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"><br><img src="https://img-blog.csdn.net/20180518173135895?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdWJpbjE5OTFsaXViaW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"><br>当然，你可以选择不修改编译文件的输出位置<br><img src="https://img-blog.csdn.net/20180519221745532?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdWJpbjE5OTFsaXViaW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"></p>
<h3 id="2-设置项目的依赖jar包"><a href="#2-设置项目的依赖jar包" class="headerlink" title="2.设置项目的依赖jar包"></a>2.设置项目的依赖jar包</h3><p><img src="https://img-blog.csdn.net/20180518173332898?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdWJpbjE5OTFsaXViaW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"><br><img src="https://img-blog.csdn.net/20180518173340854?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdWJpbjE5OTFsaXViaW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"><br><img src="https://img-blog.csdn.net/2018051817335063?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdWJpbjE5OTFsaXViaW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"></p>
<p>Intellij IDEA 添加jar包的三种方式比较<a target="_blank" rel="noopener" href="https://blog.csdn.net/zwj1030711290/article/details/56678353/">https://blog.csdn.net/zwj1030711290/article/details/56678353/</a></p>
<h3 id="3-部署项目到tomcat"><a href="#3-部署项目到tomcat" class="headerlink" title="3.部署项目到tomcat"></a>3.部署项目到tomcat</h3><p>配置热部署（方便测试）<br><img src="https://img-blog.csdn.net/2018051919272489?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdWJpbjE5OTFsaXViaW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"></p>
<p><img src="https://img-blog.csdn.net/2018051817360154?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L2xpdWJpbjE5OTFsaXViaW4=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"></p>
<h3 id="4-IntelliJ-IDEA在运行web项目时部署的位置-tomcat-（重要）"><a href="#4-IntelliJ-IDEA在运行web项目时部署的位置-tomcat-（重要）" class="headerlink" title="4.IntelliJ IDEA在运行web项目时部署的位置(tomcat)（重要）"></a>4.IntelliJ IDEA在运行web项目时部署的位置(tomcat)（重要）</h3><p>请参考<a target="_blank" rel="noopener" href="https://blog.csdn.net/Victor_Cindy1/article/details/72680553?fps=1&amp;locationNum=3">https://blog.csdn.net/Victor_Cindy1/article/details/72680553?fps=1&amp;locationNum=3</a></p>
<h3 id="5-IntelliJ-IDEA断点调试"><a href="#5-IntelliJ-IDEA断点调试" class="headerlink" title="5.IntelliJ IDEA断点调试"></a>5.IntelliJ IDEA断点调试</h3><p>请参考<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_27093465/article/details/64124330">https://blog.csdn.net/qq_27093465/article/details/64124330</a></p>
<h3 id="4-IntelliJ-IDEA打包项目"><a href="#4-IntelliJ-IDEA打包项目" class="headerlink" title="4.IntelliJ IDEA打包项目"></a>4.IntelliJ IDEA打包项目</h3><p>请参考 <a target="_blank" rel="noopener" href="https://blog.csdn.net/Abysscarry/article/details/78621225?locationNum=9&amp;fps=1">https://blog.csdn.net/Abysscarry/article/details/78621225?locationNum=9&amp;fps=1</a></p>
<p>其他的参考资料：<a target="_blank" rel="noopener" href="https://www.cnblogs.com/deng-cc/p/6416332.html">https://www.cnblogs.com/deng-cc/p/6416332.html</a></p>

      
    </div>
      
        
        
      
      <div class="clearfix"></div>
      </footer>
  </div>
</article>





  <article class="post">
  <div class="post-content">
    <header>
      
  
    <h1 class="title"><a href="/2018/04/08/Java/JQuery/">JQuery</a></h1>
  

      
        <time datetime="2018-04-08T07:33:00.000Z">2018-04-08</time>
      
    </header>
    <div class="entry">
      
        <h1 id="jQuery"><a href="#jQuery" class="headerlink" title="jQuery"></a>jQuery</h1><p>最近的项目用到jQuery,但之前我对前端的东西不是很熟，故参照W3CSchool的教程进行总结和笔记记录，加深印象。</p>
<hr>
<p>##1. jQuery是一个轻量级的javaScript函数库</p>
<ul>
<li><p>jQuery包含以下特性</p>
<ul>
<li>HTML元素的选取</li>
<li>HTML元素的操作</li>
<li>CSS操作</li>
<li>HTML事件函数</li>
<li>JavaScript特效和动画</li>
<li>HTML DOM遍历和修改</li>
<li>AJAX</li>
<li>Utilities</li>
</ul>
</li>
<li><p>jQuery库位于单个JavaScript文件中，其中包含所有jQuery函数。引入jQuery库：</p>
<pre><code>      /*&lt;head&gt;
          &lt;script type=&quot;text/javascript&quot; src=&quot;jquery.js&quot;&gt;&lt;/script&gt;
      &lt;/head&gt;*/</code></pre>
<p>实际开发中可以这样引入</p>
<pre><code>  &lt;%
      String path = request.getContextPath();
   %&gt;
   &lt;script type=&quot;text/javascript&quot; src=&quot;&lt;%=path%&gt;/edview/js/jquery/jquery.js&quot;&gt;&lt;/script&gt;
   //&lt;%=path%&gt;后面是jQuery.js实际的存放位置</code></pre>
<p>如果不愿意在自己的计算机上存放 jQuery 库，那么可以从 Google or Microsoft 加载 CDN jQuery 核心文件。请参考问W3CSchool教程。</p>
</li>
</ul>
<hr>
<h2 id="2-文档就绪函数"><a href="#2-文档就绪函数" class="headerlink" title="2.文档就绪函数"></a>2.文档就绪函数</h2><pre><code>$(document).ready(function()&#123;

    --- jQuery functions go here ----

&#125;);</code></pre>
<hr>
<p>实例中所有的jQuery函数都应该在文档就绪函数中，这是为了防止文档在完全加载（就绪）之前运行 jQuery 代码。</p>
<hr>
<h2 id="3-jQuery选择器"><a href="#3-jQuery选择器" class="headerlink" title="3.jQuery选择器"></a>3.jQuery选择器</h2><ul>
<li><p>元素选择器（使用css选择器来选取HTML元素）</p>
<ul>
<li><p>$(“p”) 选取 <p> 元素。</p>
</li>
<li><p>$(“p.intro”) 选取所有 class=”intro” 的 <p> 元素。</p>
</li>
<li><p>$(“p#demo”) 选取 id=”demo” 的第一个 <p> 元素</p>
</li>
</ul>
</li>
<li><p>jQuery 属性选择器（使用 XPath 表达式来选择带有给定属性的元素）</p>
<ul>
<li><p>$(“[href]”) 选取所有带有 href 属性的元素。</p>
</li>
<li><p>$(“[href=’#’]”) 选取所有带有 href 值等于 “#” 的元素。</p>
</li>
<li><p>$(“[href!=’#’]”) 选取所有带有 href 值不等于 “#” 的元素。</p>
</li>
<li><p>$(“[href$=’.jpg’]”) 选取所有 href 值以 “.jpg” 结尾的元素。</p>
</li>
</ul>
</li>
<li><p>jQuery CSS 选择器</p>
<ul>
<li>$(“p”).css(“background-color”,”red”);</li>
</ul>
</li>
</ul>
<hr>
<h2 id="4-jQuery事件"><a href="#4-jQuery事件" class="headerlink" title="4.jQuery事件"></a>4.jQuery事件</h2><ul>
<li><p>事件处理函数是当 HTML 中发生事件时自动被调用的函数。由“事件”（event）“触发”（triggered）是经常被用到的术语。</p>
</li>
<li><p>jQuery的书写原则</p>
<ul>
<li>把所有 jQuery 代码置于事件处理函数中 </li>
<li>把所有事件处理函数置于文档就绪事件处理器中 </li>
<li>把 jQuery 代码置于单独的 .js 文件中 </li>
<li>如果存在名称冲突，则重命名 jQuery 库 </li>
</ul>
</li>
</ul>
<hr>
<h2 id="5-jQuery效果函数"><a href="#5-jQuery效果函数" class="headerlink" title="5. jQuery效果函数"></a>5. jQuery效果函数</h2><pre><code>隐藏、显示、切换、以及动画效果。常见的：</code></pre>
<ul>
<li>show();</li>
<li>hide();</li>
<li>toggle();</li>
</ul>
<hr>
<h2 id="6-jQuery-Callback回调函数"><a href="#6-jQuery-Callback回调函数" class="headerlink" title="6. jQuery Callback回调函数"></a>6. jQuery Callback回调函数</h2><ul>
<li><p>A callback is a function that is passed as an argument to another function and is executed after its parent function has completed.回调函数就是一个函数被当做参数传入另一个函数中，当另一个函数执行完成后，该函数被执行。例：</p>
<pre><code>  $(&quot;p&quot;).hide(1000,function()&#123;
      alert(&quot;The paragraph is now hidden&quot;);
  &#125;);</code></pre>
</li>
<li><p>回调函数的理解</p>
<pre><code>  var fn = new Function(&quot;arg1&quot;, &quot;arg2&quot;, &quot;return arg1 * arg2;&quot;);
  fn(3, 4);   //12
  上面这段代码中函数的参数是字符串，最后一段字符串实际上是一段js代码，因此上一段代码中，参数function()实际上相当于一段可执行的字符串，最后会被执行。</code></pre>
</li>
<li><p>应用。在涉及到动画等函数处理时，回调函数很有用。例：</p>
<pre><code>  /*&lt;p&gt;The paragraph&lt;/p&gt;*/

      $(document).ready(function()&#123;
            $(&quot;button&quot;).click(function()&#123;
                $(&quot;p&quot;).hide(4000);
               alert(&quot;The paragraph is now hidden&quot;);
            &#125;);
      &#125;);</code></pre>
<p>点击button后，弹出标签被隐藏的信息，但实际上p标签在4秒后隐藏，可能还未隐藏，这是就发生了逻辑上的错误，因此需要把alert(“The paragraph is now hidden”)写到callback函数中，如下</p>
<pre><code>      $(document).ready(function()&#123;
            $(&quot;button&quot;).click(function()&#123;
                $(&quot;p&quot;).hide(1000,function()&#123;
                      alert(&quot;The paragraph is now hidden&quot;);
                  &#125;);
            &#125;);
      &#125;);</code></pre>
</li>
</ul>
<hr>
<h2 id="7-jQuery操作HTML"><a href="#7-jQuery操作HTML" class="headerlink" title="7.jQuery操作HTML"></a>7.jQuery操作HTML</h2><ul>
<li><p>改变HTML内容</p>
<pre><code>  $(selector).html(content);  //html()函数改变所匹配的HTML元素的内容（innerHTML）</code></pre>
</li>
<li><p>添加HTML内容</p>
<pre><code> $(selector).append(content); //append()函数向所匹配的HTML元素内部追加内容</code></pre>
</li>
</ul>
<hr>
<h2 id="8-jQuery-CSS函数"><a href="#8-jQuery-CSS函数" class="headerlink" title="8.jQuery CSS函数"></a>8.jQuery CSS函数</h2><ul>
<li><p>$(selector).css(name,value)   //为所有匹配元素的给定CSS属性设置值</p>
</li>
<li><p>$(selector).css({properties})   //为所有匹配元素的一系列CSS属性设置值</p>
</li>
<li><p>$(selector).css(name)  //返回指定CSS属性的值</p>
<pre><code>  $(&quot;p&quot;).css(&quot;background-color&quot;,&quot;yellow&quot;);
  $(&quot;p&quot;).css(&#123;&quot;background-color&quot;:&quot;yellow&quot;,&quot;font-size&quot;:&quot;200%&quot;&#125;);
  $(this).css(&quot;background-color&quot;);</code></pre>
</li>
<li><p>jQuery 拥有两种供尺寸操作的重要函数：</p>
<pre><code>  $(selector).height(value) 
  $(selector).width(value) </code></pre>
</li>
</ul>
<hr>
<h2 id="9-jQuery-AJAX函数"><a href="#9-jQuery-AJAX函数" class="headerlink" title="9.jQuery AJAX函数"></a>9.jQuery AJAX函数</h2><ul>
<li><p>jQuery提供了供AJAX开发的丰富函数库</p>
</li>
<li><p>jQuery 的 load 函数是一种简单的（但很强大的）AJAX 函数</p>
<pre><code>  $(selector).load(url,data,callback)</code></pre>
</li>
<li><p>$.ajax(options) 是低层级 AJAX 函数的语法，提供了比高层级函数更多的功能，但是同时也更难使用。</p>
<pre><code>  option 参数设置的是 name|value 对，定义 url 数据、密码、数据类型、过滤器、字符集、超时以及错误函数

          var params = &#123;//三个参数为
                  &#39;task_Name&#39;: task_Name,
                  &#39;business_Type&#39;:business_Type,
                  &#39;send_Schedule&#39;:send_Schedule,
                  &#125;;

          $.ajax(&#123;
              url:  path + &#39;/task/queryAllTaskList&#39;,
              type : &#39;post&#39;, /*请求方式*/
              dataType : &#39;json&#39;, /*被返回的数据的类型 (html,xml,json,jasonp,script,text)*/
              data : params,/*键值对的参数*/
              success : function(data) &#123;//data是请求后

                  showTerminalTalble(data.taskList);
                  if(null == data.errMsg || data.errMsg == &quot;&quot;) &#123;
                      if(updatePageNum)&#123;
                          paginationUtil.showPageCountSelect(data.totalNum);
                      &#125;
                      if(clickbtn)&#123;
                          paginationUtil.setPageNum(1);
                      &#125;    
                   &#125; else &#123;
                      $(&quot;#taskTable&quot;).html(&quot;&quot;);
                      $.jBoxUtil.noticeError(&#123;content: data.errMsg&#125;);
                  &#125;

              &#125;,
              error : function(data) &#123;
                  //var b=1;
              &#125;
          &#125;);     
      &#125;</code></pre>
</li>
</ul>
<hr>

      
    </div>
      
        
        
      
      <div class="clearfix"></div>
      </footer>
  </div>
</article>





  <article class="post">
  <div class="post-content">
    <header>
      
  
    <h1 class="title"><a href="/2018/04/08/Java/NPM工具的使用/">NPM工具的使用</a></h1>
  

      
        <time datetime="2018-04-08T07:33:00.000Z">2018-04-08</time>
      
    </header>
    <div class="entry">
      
        <h1 id="NPM工具的使用"><a href="#NPM工具的使用" class="headerlink" title="NPM工具的使用"></a>NPM工具的使用</h1><h3 id="NPM基本介绍"><a href="#NPM基本介绍" class="headerlink" title="NPM基本介绍"></a>NPM基本介绍</h3><ul>
<li><p>NPM是什么？NPM是随同NodeJS一起安装的包管理工具，能解决NodeJS代码部署上的很多问题。NPM的中文文档<a target="_blank" rel="noopener" href="https://www.npmjs.com.cn/getting-started/what-is-npm/%E4%B8%8A%E4%BB%8B%E7%BB%8D%E8%AF%B4%EF%BC%9A">https://www.npmjs.com.cn/getting-started/what-is-npm/上介绍说：</a><br>  它是世界上最大的软件注册表，每星期大约有 30 亿次的下载量，包含超过 600000 个 包（package） （即，代码模块）。来自各大洲的开源软件开发者使用 npm 互相分享和借鉴。包的结构使您能够轻松跟踪依赖项和版本。<br>  <img src="http://img.blog.csdn.net/20180306162142661?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1YmluMTk5MWxpdWJpbg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"><br>   NPM就像一个超级管家一样，管理者各类js模块代码，并把js开发者联系起来。</p>
<ul>
<li><p>NPM构成<br> npm 由三个独立的部分组成：</p>
<pre><code>- 1网站  ：  网站是开发者查找包（package）、设置参数以及管理 npm 使用体验的主要途径。
- 2注册表（registry）  ：  注册表 是一个巨大的数据库，保存了每个包（package）的信息。
- 3命令行工具 (CLI)  ：  CLI 通过命令行或终端运行。开发者通过 CLI 与 npm 打交道。</code></pre>
<p>网站网址：<a target="_blank" rel="noopener" href="https://www.npmjs.com/">https://www.npmjs.com</a><br><img src="http://img.blog.csdn.net/20180306163016667?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1YmluMTk5MWxpdWJpbg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"><br>你可以点进你感兴趣的项目，查看该项目如何使用等。</p>
</li>
</ul>
</li>
</ul>
<h3 id="NPM使用"><a href="#NPM使用" class="headerlink" title="NPM使用"></a>NPM使用</h3><ul>
<li><p>因为我这里要用到Node.js，所以我下载Node.js后自带NPM。<br><img src="http://img.blog.csdn.net/20180306163538825?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1YmluMTk5MWxpdWJpbg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"></p>
</li>
<li><p>测试NPM是否安装成功 npm -v<br><img src="http://img.blog.csdn.net/20180306164102999?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1YmluMTk5MWxpdWJpbg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"><br>如图显示NPM的版本号，表示NPM安装成功。</p>
</li>
<li><p>使用 npm 命令安装模块</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">npm install [-g] &lt;Module Name&gt; </span><br><span class="line"></span><br><span class="line">没有参数-g表示本地安装，本地安装指的是：</span><br><span class="line">	将安装包放在“运行npm命令时所在的目录” ，</span><br><span class="line">	可以通过 require() 来引入本地安装的包。</span><br><span class="line">	使用时，在代码中只需要通过 require(&#39;Module Name&#39;) 的方式就好，无需指定第三方包路径。 </span><br><span class="line">带有参数-g表示全局安装，全局安装是指：</span><br><span class="line">	将安装包放在 &#x2F;usr&#x2F;local 下或者你 node 的安装目录，</span><br><span class="line">	可以直接在命令行里使用</span><br><span class="line">Module Name指的是包名，即代码模块的名字。</span><br></pre></td></tr></table></figure>

<p>  我们使用 npm 命令安装cordova和ionic包,这里暂时不用管cordova和ionic包是什么，只需要这是相关的代码模块。</p>
</li>
</ul>
<pre><code><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">npm install -g cordova ionic  （网速较慢，下载时间长）</span><br><span class="line">或者</span><br><span class="line">npm install -g cnpm --registry&#x3D;https:&#x2F;&#x2F;registry.npm.taobao.org （淘宝镜像）</span><br><span class="line"></span><br><span class="line">你可以使用淘宝定制的 cnpm (gzip 压缩支持) 命令行工具代替默认的 npm:</span><br><span class="line">npm install -g cnpm --registry&#x3D;https:&#x2F;&#x2F;registry.npm.taobao.org</span><br><span class="line"></span><br><span class="line">接下来就可以使用cnpm 命令来安装模块了其他：</span><br><span class="line">cnpm install -g ionic cordova </span><br></pre></td></tr></table></figure></code></pre>
<ul>
<li><p>查看安装信息</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">查看所有全局安装的模块</span><br><span class="line">npm list -g</span><br><span class="line"></span><br><span class="line">查看某个模块的具体安装信息</span><br><span class="line">npm list &lt;Module Name&gt;</span><br></pre></td></tr></table></figure></li>
<li><p>package.json文件<br>因为我的window系统，并采用全局安装，因此安装的包位于：<br><img src="http://img.blog.csdn.net/20180306171313643?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1YmluMTk5MWxpdWJpbg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"><br>以ionic为例查看该包的package.json文件<br><img src="http://img.blog.csdn.net/20180306172440905?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1YmluMTk5MWxpdWJpbg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"></p>
</li>
<li><p>卸载、更新、搜索模块</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">npm uninstall ionic</span><br><span class="line">卸载后，你可以到 &#x2F;node_modules&#x2F; 目录下查看包是否还存在，或者使用以下命令查看：</span><br><span class="line">npm ls</span><br><span class="line"></span><br><span class="line">npm update ionic</span><br><span class="line"></span><br><span class="line">npm search ionic</span><br></pre></td></tr></table></figure></li>
<li><p>创建模块<br>创建模块请参考<a target="_blank" rel="noopener" href="http://www.runoob.com/nodejs/nodejs-npm.html">http://www.runoob.com/nodejs/nodejs-npm.html</a> 。</p>
</li>
</ul>

      
    </div>
      
        
        
      
      <div class="clearfix"></div>
      </footer>
  </div>
</article>





  <article class="post">
  <div class="post-content">
    <header>
      
  
    <h1 class="title"><a href="/2018/04/08/Java/Tomcat服务器的介绍、安装与配置/">Tomcat服务器的介绍、安装与配置</a></h1>
  

      
        <time datetime="2018-04-08T07:33:00.000Z">2018-04-08</time>
      
    </header>
    <div class="entry">
      
        <h2 id="基本介绍"><a href="#基本介绍" class="headerlink" title="基本介绍"></a>基本介绍</h2><ul>
<li>Tomcat服务器架构<br><img src="http://img.blog.csdn.net/20180301105223710?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1YmluMTk5MWxpdWJpbg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"></li>
<li>Tomcat目录<br><img src="http://img.blog.csdn.net/20180301105249633?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1YmluMTk5MWxpdWJpbg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"><ul>
<li>bin：存放tomcat启动关闭所用的批处理文件</li>
<li>conf : tomcat的配置文件， 最重要的是server.xml，其中可以修改端口号</li>
<li>lib : tomcat运行所需的jar包</li>
<li>logs : tomcat运行时产生的日志文件</li>
<li>temp : tomcat运行时使用的临时目录，不需要关注</li>
<li>webapps : web应用所存放的根目录</li>
<li>work : tomcat的工作目录</li>
</ul>
</li>
<li>conf目录下的server.xml文件详解</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version&#x3D;&#39;1.0&#39; encoding&#x3D;&#39;utf-8&#39;?&gt;</span><br><span class="line"></span><br><span class="line">&lt;Server port&#x3D;&quot;8005&quot; shutdown&#x3D;&quot;SHUTDOWN&quot;&gt;</span><br><span class="line">  &lt;!--APR library loader. Documentation at &#x2F;docs&#x2F;apr.html --&gt;</span><br><span class="line">  &lt;Listener className&#x3D;&quot;org.apache.catalina.core.AprLifecycleListener&quot; SSLEngine&#x3D;&quot;on&quot; &#x2F;&gt;</span><br><span class="line">  &lt;!--Initialize Jasper prior to webapps are loaded. Documentation at &#x2F;docs&#x2F;jasper-howto.html --&gt;</span><br><span class="line">  &lt;Listener className&#x3D;&quot;org.apache.catalina.core.JasperListener&quot; &#x2F;&gt;</span><br><span class="line">  &lt;!-- Prevent memory leaks due to use of particular java&#x2F;javax APIs--&gt;</span><br><span class="line">  &lt;Listener className&#x3D;&quot;org.apache.catalina.core.JreMemoryLeakPreventionListener&quot; &#x2F;&gt;</span><br><span class="line">  &lt;Listener className&#x3D;&quot;org.apache.catalina.mbeans.GlobalResourcesLifecycleListener&quot; &#x2F;&gt;</span><br><span class="line">  &lt;Listener className&#x3D;&quot;org.apache.catalina.core.ThreadLocalLeakPreventionListener&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!-- 全局命名资源，用来定义一些外部访问资源，作用是为所有的引擎程序所引用的外部资源的定义--&gt;</span><br><span class="line">  &lt;GlobalNamingResources&gt;</span><br><span class="line">    &lt;!-- 定义一个名为“UserDatabase”的认证资源，将conf&#x2F;tomcat-users.xml加载至内存中，在需要认证的时候到内存中进行认证--&gt;</span><br><span class="line">    &lt;Resource name&#x3D;&quot;UserDatabase&quot; auth&#x3D;&quot;Container&quot;</span><br><span class="line">              type&#x3D;&quot;org.apache.catalina.UserDatabase&quot;</span><br><span class="line">              description&#x3D;&quot;User database that can be updated and saved&quot;</span><br><span class="line">              factory&#x3D;&quot;org.apache.catalina.users.MemoryUserDatabaseFactory&quot;</span><br><span class="line">              pathname&#x3D;&quot;conf&#x2F;tomcat-users.xml&quot; &#x2F;&gt;</span><br><span class="line">  &lt;&#x2F;GlobalNamingResources&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!-- 定义Service组件，同来关联Connector和Engine，一个Engine可以对应多个Connector，每个Service中只能一个Engine--&gt;</span><br><span class="line">  &lt;Service name&#x3D;&quot;Catalina&quot;&gt;</span><br><span class="line">	&lt;!-- 修改HTTP&#x2F;1.1的Connector默认监听端口80为8180.客户端通过浏览器访问的请求，只能通过HTTP传递给tomcat。  --&gt;</span><br><span class="line">    &lt;Connector port&#x3D;&quot;8180&quot; protocol&#x3D;&quot;HTTP&#x2F;1.1&quot;</span><br><span class="line">               connectionTimeout&#x3D;&quot;20000&quot;</span><br><span class="line">               redirectPort&#x3D;&quot;8443&quot; &#x2F;&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;Connector port&#x3D;&quot;8009&quot; protocol&#x3D;&quot;AJP&#x2F;1.3&quot; redirectPort&#x3D;&quot;8443&quot; &#x2F;&gt;</span><br><span class="line">    &lt;!-- 当前Engine默认主机是localhost，当然你可以按照自己的需求修改  --&gt; </span><br><span class="line">    &lt;Engine name&#x3D;&quot;Catalina&quot; defaultHost&#x3D;&quot;localhost&quot;&gt;</span><br><span class="line">	  &lt;!-- Realm组件，定义对当前容器内的应用程序访问的认证，通过外部资源UserDatabase进行认证 --&gt;</span><br><span class="line">      &lt;Realm className&#x3D;&quot;org.apache.catalina.realm.LockOutRealm&quot;&gt;</span><br><span class="line">        &lt;Realm className&#x3D;&quot;org.apache.catalina.realm.UserDatabaseRealm&quot;</span><br><span class="line">               resourceName&#x3D;&quot;UserDatabase&quot;&#x2F;&gt;</span><br><span class="line">      &lt;&#x2F;Realm&gt;</span><br><span class="line">	  &lt;!--  默认的主机域名为localhost，应用程序的目录是&#x2F;webapps，设置自动解压，自动部署    --&gt;</span><br><span class="line">      &lt;Host name&#x3D;&quot;localhost&quot;  appBase&#x3D;&quot;webapps&quot;</span><br><span class="line">            unpackWARs&#x3D;&quot;true&quot; autoDeploy&#x3D;&quot;true&quot;&gt;</span><br><span class="line">		&lt;!-- 定义一个别名www.robinliew.com --&gt; </span><br><span class="line">		&lt;Alias&gt;www.robinliew.com&lt;&#x2F;Alias&gt;   </span><br><span class="line">		&lt;!--  定义该应用程序，访问路径&quot;&quot;，即访问www.robinliew.com即可访问，网页目录为：相对于appBase下的test1&#x2F;，</span><br><span class="line">				即&#x2F;webapps&#x2F;test1，并且当该应用程序下web.xml或者类等有相关变化时，自动重载当前配置，即不用重启tomcat使部署的新应用程序生效  --&gt;		</span><br><span class="line">        &lt;Context path&#x3D;&quot;&quot; docBase&#x3D;&quot;test1&#x2F;&quot; reloadable&#x3D;&quot;true&quot; &#x2F;&gt;   </span><br><span class="line">		&lt;!--  定义另外一个独立的应用程序，访问路径为：www.robinliew.com&#x2F;test2，该应用程序网页目录为&#x2F;webapps&#x2F;test2  --&gt; </span><br><span class="line">        &lt;Context path&#x3D;&quot;&#x2F;test2&quot; docBase&#x3D;&quot;&#x2F;webapps&#x2F;test2&quot; reloadable&#x3D;&quot;true&quot; &#x2F;&gt;   </span><br><span class="line">        &lt;!--   定义一个Valve组件，用来记录tomcat的访问日志，日志存放目录为：logs。</span><br><span class="line">				定义日志文件前缀为localhost_access_log.并以.txt结尾，pattern定义日志内容格式，具体字段表示可以查看tomcat官方文档   --&gt; </span><br><span class="line">        &lt;Valve className&#x3D;&quot;org.apache.catalina.valves.AccessLogValve&quot; directory&#x3D;&quot;logs&quot;</span><br><span class="line">               prefix&#x3D;&quot;localhost_access_log.&quot; suffix&#x3D;&quot;.txt&quot;</span><br><span class="line">               pattern&#x3D;&quot;%h %l %u %t &quot;%r&quot; %s %b&quot; &#x2F;&gt;</span><br><span class="line"></span><br><span class="line">      &lt;&#x2F;Host&gt;</span><br><span class="line">    &lt;&#x2F;Engine&gt;</span><br><span class="line">  &lt;&#x2F;Service&gt;</span><br><span class="line">&lt;&#x2F;Server&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><p>conf目录下的tomcat-users.xml文件<br><img src="http://img.blog.csdn.net/20180301105930559?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1YmluMTk5MWxpdWJpbg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70" alt="这里写图片描述"><br>##安装与配置</p>
</li>
<li><p>1.Tomcat的启动安装：</p>
<ul>
<li>JAVA_HOME环境变量<br>Tomcat需要运行在JVM虚拟机上，它通过JAVA_HOME找到JVM，因此将JAVA_HOME环境变量设置为JDK的主目录，就可以使用startup.bat文件启动Tomcat了</li>
<li>端口占用问题<br>可以使用netstat -ano指令查看，强行关闭</li>
<li>Catalina_home环境变量的设置问题</li>
</ul>
</li>
<li><p>2.虚拟主机（一个真实主机可以运行多个网站，对于浏览器来说这些网站就好像都运行在自己的独立主机中一样，<br>  所以我们可以说每一个网站都运行在一个虚拟主机上，一个网站就是一个虚拟主机）</p>
</li>
<li><p>3.web应用（web资源不能直接交给虚拟主机，需要按照功能组织放进一个文件夹成为web应用再交给虚拟主机管理）</p>
</li>
<li><p>4.web应用的目录</p>
<ul>
<li>静态网页资源文件</li>
<li>WEB-INF文件夹<ul>
<li>classes文件夹</li>
<li>lib文件夹</li>
<li>web.xml:将某个web资源配置为web应用首页</li>
</ul>
</li>
</ul>
</li>
<li><p>5.配置虚拟主机：</p>
<ul>
<li>在conf/server.xml中<Engine>标签下配置<Host>标签就可以为Tomcat增加一台虚拟主机了</li>
<li>name：指定虚拟主机的名称，浏览器通过这个名称访问虚拟主机</li>
<li>appBase:虚拟主机管理的目录，放置在这个目录下的web应用，当前虚拟主机可以自动加载</li>
<li>由于浏览器访问地址时，需要将地址翻译成ip才能找到服务器，这其中的翻译过程由dns服务器来实现。<br>我们没办法修改dns服务器，此时可以使用hosts文件模拟dns的功能，从而完成实验</li>
</ul>
</li>
<li><p>6.缺省虚拟主机：如果访问是通过ip来访问，这个时候服务器无法辨别当前要访问的是哪台虚拟机中的资源<br>  ，此时访问缺省虚拟主机，缺省虚拟主机可以在server.xml中的engin标签上通过defaultHost属性进行配置</p>
</li>
<li><p>7.为虚拟主机配置web应用：</p>
<ul>
<li>方法一：在Server.xml的<Host>标签中，配置<Context>标签，就可以为该虚拟主机配置一个web应用了<pre><code>  如果将path设置为空则这个web应用为缺省应用
  这种配置方式需要重启服务器，不推荐</code></pre>
</li>
<li>方法二：在tomcat/conf/[Engin]/[Host]/在这个目录下写一个XML文件，其中xml文件的名字就是虚拟路径，<pre><code>  如果是多级应用用#代替/表示，文件中配置&lt;Context docBase=&quot;真实目录&quot;&gt;，
  如果文件名起为ROOT.xml则此web应用为默认web应用</code></pre>
</li>
<li>方法三：直接将web应用放置到虚拟主机对应的目录下，如果目录名起为ROOT则此web应用为默认web应用</li>
</ul>
</li>
</ul>

      
    </div>
      
        
        
      
      <div class="clearfix"></div>
      </footer>
  </div>
</article>





  <article class="post">
  <div class="post-content">
    <header>
      
  
    <h1 class="title"><a href="/2018/04/08/Java并发/什么时候使用CountDownLatch/">什么时候使用CountDownLatch</a></h1>
  

      
        <time datetime="2018-04-08T07:33:00.000Z">2018-04-08</time>
      
    </header>
    <div class="entry">
      
        <p>正如每个Java文档所描述的那样，CountDownLatch是一个同步工具类，它允许一个或多个线程一直等待，直到其他线程的操作执行完后再执行。在Java并发中，countdownlatch的概念是一个常见的面试题，所以一定要确保你很好的理解了它。在这篇文章中，我将会涉及到在Java并发编 程中跟CountDownLatch相关的以下几点：<br>目录</p>
<pre><code>CountDownLatch是什么？
CountDownLatch如何工作？
在实时系统中的应用场景
应用范例
常见的面试题</code></pre>
<p>CountDownLatch是什么</p>
<p>CountDownLatch是在java1.5被引入的，跟它一起被引入的并发工具类还有CyclicBarrier、Semaphore、ConcurrentHashMap和BlockingQueue，它们都存在于java.util.concurrent包下。CountDownLatch这个类能够使一个线程等待其他线程完成各自的工作后再执行。例如，应用程序的主线程希望在负责启动框架服务的线程已经启动所有的框架服务之后再执行。</p>
<p>CountDownLatch是通过一个计数器来实现的，计数器的初始值为线程的数量。每当一个线程完成了自己的任务后，计数器的值就会减1。当计数器值到达0时，它表示所有的线程已经完成了任务，然后在闭锁上等待的线程就可以恢复执行任务。<br><img src="http://img.blog.csdn.net/20171212184610746?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvbGl1YmluMTk5MWxpdWJpbg==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"><br>CountDownLatch的伪代码如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;Main thread start</span><br><span class="line">&#x2F;&#x2F;Create CountDownLatch for N threads</span><br><span class="line">&#x2F;&#x2F;Create and start N threads</span><br><span class="line">&#x2F;&#x2F;Main thread wait on latch</span><br><span class="line">&#x2F;&#x2F;N threads completes there tasks are returns</span><br><span class="line">&#x2F;&#x2F;Main thread resume execution</span><br></pre></td></tr></table></figure>

<p>CountDownLatch如何工作</p>
<p>CountDownLatch.java类中定义的构造函数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;Constructs a CountDownLatch initialized with the given count.</span><br><span class="line">public void CountDownLatch(int count) &#123;...&#125;</span><br></pre></td></tr></table></figure>

<p>构造器中的计数值（count）实际上就是闭锁需要等待的线程数量。这个值只能被设置一次，而且CountDownLatch没有提供任何机制去重新设置这个计数值。</p>
<p>与CountDownLatch的第一次交互是主线程等待其他线程。主线程必须在启动其他线程后立即调用CountDownLatch.await()方法。这样主线程的操作就会在这个方法上阻塞，直到其他线程完成各自的任务。</p>
<p>其他N 个线程必须引用闭锁对象，因为他们需要通知CountDownLatch对象，他们已经完成了各自的任务。这种通知机制是通过 CountDownLatch.countDown()方法来完成的；每调用一次这个方法，在构造函数中初始化的count值就减1。所以当N个线程都调 用了这个方法，count的值等于0，然后主线程就能通过await()方法，恢复执行自己的任务。<br>在实时系统中的使用场景</p>
<p>让我们尝试罗列出在java实时系统中CountDownLatch都有哪些使用场景。我所罗列的都是我所能想到的。如果你有别的可能的使用方法，请在留言里列出来，这样会帮助到大家。</p>
<pre><code>实现最大的并行性：有时我们想同时启动多个线程，实现最大程度的并行性。例如，我们想测试一个单例类。如果我们创建一个初始计数为1的CountDownLatch，并让所有线程都在这个锁上等待，那么我们可以很轻松地完成测试。我们只需调用 一次countDown()方法就可以让所有的等待线程同时恢复执行。
开始执行前等待n个线程完成各自任务：例如应用程序启动类要确保在处理用户请求前，所有N个外部系统已经启动和运行了。
死锁检测：一个非常方便的使用场景是，你可以使用n个线程访问共享资源，在每次测试阶段的线程数目是不同的，并尝试产生死锁。</code></pre>
<p>CountDownLatch使用例子</p>
<p>在这个例子中，我模拟了一个应用程序启动类，它开始时启动了n个线程类，这些线程将检查外部系统并通知闭锁，并且启动类一直在闭锁上等待着。一旦验证和检查了所有外部服务，那么启动类恢复执行。</p>
<p>BaseHealthChecker.java：这个类是一个Runnable，负责所有特定的外部服务健康的检测。它删除了重复的代码和闭锁的中心控制代码。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">public abstract class BaseHealthChecker implements Runnable &#123;</span><br><span class="line"> </span><br><span class="line">    private CountDownLatch _latch;</span><br><span class="line">    private String _serviceName;</span><br><span class="line">    private boolean _serviceUp;</span><br><span class="line"> </span><br><span class="line">    &#x2F;&#x2F;Get latch object in constructor so that after completing the task, thread can countDown() the latch</span><br><span class="line">    public BaseHealthChecker(String serviceName, CountDownLatch latch)</span><br><span class="line">    &#123;</span><br><span class="line">        super();</span><br><span class="line">        this._latch &#x3D; latch;</span><br><span class="line">        this._serviceName &#x3D; serviceName;</span><br><span class="line">        this._serviceUp &#x3D; false;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    @Override</span><br><span class="line">    public void run() &#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            verifyService();</span><br><span class="line">            _serviceUp &#x3D; true;</span><br><span class="line">        &#125; catch (Throwable t) &#123;</span><br><span class="line">            t.printStackTrace(System.err);</span><br><span class="line">            _serviceUp &#x3D; false;</span><br><span class="line">        &#125; finally &#123;</span><br><span class="line">            if(_latch !&#x3D; null) &#123;</span><br><span class="line">                _latch.countDown();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public String getServiceName() &#123;</span><br><span class="line">        return _serviceName;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public boolean isServiceUp() &#123;</span><br><span class="line">        return _serviceUp;</span><br><span class="line">    &#125;</span><br><span class="line">    &#x2F;&#x2F;This methos needs to be implemented by all specific service checker</span><br><span class="line">    public abstract void verifyService();</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>NetworkHealthChecker.java：这个类继承了BaseHealthChecker，实现了verifyService()方法。DatabaseHealthChecker.java和CacheHealthChecker.java除了服务名和休眠时间外，与NetworkHealthChecker.java是一样的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">public class NetworkHealthChecker extends BaseHealthChecker</span><br><span class="line">&#123;</span><br><span class="line">    public NetworkHealthChecker (CountDownLatch latch)  &#123;</span><br><span class="line">        super(&quot;Network Service&quot;, latch);</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    @Override</span><br><span class="line">    public void verifyService()</span><br><span class="line">    &#123;</span><br><span class="line">        System.out.println(&quot;Checking &quot; + this.getServiceName());</span><br><span class="line">        try</span><br><span class="line">        &#123;</span><br><span class="line">            Thread.sleep(7000);</span><br><span class="line">        &#125;</span><br><span class="line">        catch (InterruptedException e)</span><br><span class="line">        &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(this.getServiceName() + &quot; is UP&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ApplicationStartupUtil.java：这个类是一个主启动类，它负责初始化闭锁，然后等待，直到所有服务都被检测完。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">public class ApplicationStartupUtil</span><br><span class="line">&#123;</span><br><span class="line">    &#x2F;&#x2F;List of service checkers</span><br><span class="line">    private static List&lt;BaseHealthChecker&gt; _services;</span><br><span class="line"> </span><br><span class="line">    &#x2F;&#x2F;This latch will be used to wait on</span><br><span class="line">    private static CountDownLatch _latch;</span><br><span class="line"> </span><br><span class="line">    private ApplicationStartupUtil()</span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    private final static ApplicationStartupUtil INSTANCE &#x3D; new ApplicationStartupUtil();</span><br><span class="line"> </span><br><span class="line">    public static ApplicationStartupUtil getInstance()</span><br><span class="line">    &#123;</span><br><span class="line">        return INSTANCE;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    public static boolean checkExternalServices() throws Exception</span><br><span class="line">    &#123;</span><br><span class="line">        &#x2F;&#x2F;Initialize the latch with number of service checkers</span><br><span class="line">        _latch &#x3D; new CountDownLatch(3);</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F;All add checker in lists</span><br><span class="line">        _services &#x3D; new ArrayList&lt;BaseHealthChecker&gt;();</span><br><span class="line">        _services.add(new NetworkHealthChecker(_latch));</span><br><span class="line">        _services.add(new CacheHealthChecker(_latch));</span><br><span class="line">        _services.add(new DatabaseHealthChecker(_latch));</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F;Start service checkers using executor framework</span><br><span class="line">        Executor executor &#x3D; Executors.newFixedThreadPool(_services.size());</span><br><span class="line"> </span><br><span class="line">        for(final BaseHealthChecker v : _services)</span><br><span class="line">        &#123;</span><br><span class="line">            executor.execute(v);</span><br><span class="line">        &#125;</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F;Now wait till all services are checked</span><br><span class="line">        _latch.await();</span><br><span class="line"> </span><br><span class="line">        &#x2F;&#x2F;Services are file and now proceed startup</span><br><span class="line">        for(final BaseHealthChecker v : _services)</span><br><span class="line">        &#123;</span><br><span class="line">            if( ! v.isServiceUp())</span><br><span class="line">            &#123;</span><br><span class="line">                return false;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return true;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>现在你可以写测试代码去检测一下闭锁的功能了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">public class Main &#123;</span><br><span class="line">    public static void main(String[] args)</span><br><span class="line">    &#123;</span><br><span class="line">        boolean result &#x3D; false;</span><br><span class="line">        try &#123;</span><br><span class="line">            result &#x3D; ApplicationStartupUtil.checkExternalServices();</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(&quot;External services validation completed !! Result was :: &quot;+ result);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Output in console:</span><br><span class="line"> </span><br><span class="line">Checking Network Service</span><br><span class="line">Checking Cache Service</span><br><span class="line">Checking Database Service</span><br><span class="line">Database Service is UP</span><br><span class="line">Cache Service is UP</span><br><span class="line">Network Service is UP</span><br><span class="line">External services validation completed !! Result was :: true</span><br></pre></td></tr></table></figure>

<p>常见面试题</p>
<p>可以为你的下次面试准备以下一些CountDownLatch相关的问题：</p>
<pre><code>解释一下CountDownLatch概念?
CountDownLatch 和CyclicBarrier的不同之处?
给出一些CountDownLatch使用的例子?
 CountDownLatch 类中主要的方法?</code></pre>
<p>原文链接： howtodoinjava 翻译： ImportNew.com - 张涛<br>译文链接： <a target="_blank" rel="noopener" href="http://www.importnew.com/15731.html">http://www.importnew.com/15731.html</a></p>

      
    </div>
      
        
        
      
      <div class="clearfix"></div>
      </footer>
  </div>
</article>






<nav id="pagination">
  
    <a href="/" class="alignleft prev">Prev</a>
  
  
    <a href="/page/3/" class="alignright next">Next</a>
  
  <div class="clearfix"></div>
</nav></div></div>
    <aside id="sidebar" class="alignright">
  <div class="search">
  <form action="//google.com/search" method="get" accept-charset="utf-8">
    <input type="search" name="q" results="0" placeholder="Search">
    <input type="hidden" name="q" value="site:jony.github.io">
  </form>
</div>

  
<div class="widget tag">
  <h3 class="title">Recent Posts</h3>
  <ul class="entry">
    
      <li>
        <a href="/2018/07/19/JVM/2018-09-10-JVM调优/">JVM调优</a>
      </li>
    
      <li>
        <a href="/2018/07/02/JVM/2018-07-02-项目中遇到的java堆溢出解决/">项目中遇到的java堆溢出解决</a>
      </li>
    
      <li>
        <a href="/2018/04/11/JVM/2018-04-11-8_虚拟机类加载机制/">虚拟机类加载机制</a>
      </li>
    
      <li>
        <a href="/2018/04/11/JVM/2018-04-11-7_Class文件结构/">Class文件结构</a>
      </li>
    
      <li>
        <a href="/2018/04/11/JVM/2018-04-11-6_JVM参数/">JVM参数</a>
      </li>
    
  </ul>
</div>


  
<div class="widget tag">
  <h3 class="title">Categories</h3>
  <ul class="entry">
  
    <li><a href="/categories/AngularJS/">AngularJS</a><small>1</small></li>
  
    <li><a href="/categories/JVM/">JVM</a><small>12</small></li>
  
    <li><a href="/categories/Java/">Java</a><small>12</small></li>
  
    <li><a href="/categories/Java并发/">Java并发</a><small>5</small></li>
  
    <li><a href="/categories/Linux/">Linux</a><small>3</small></li>
  
    <li><a href="/categories/Maven/">Maven</a><small>1</small></li>
  
    <li><a href="/categories/算法/">算法</a><small>3</small></li>
  
    <li><a href="/categories/网络编程/">网络编程</a><small>3</small></li>
  
  </ul>
</div>


  
<div class="widget tagcloud">
  <h3 class="title">Tag Cloud</h3>
  <div class="entry">
    <a href="/tags/AngularJS/" style="font-size: 10px;">AngularJS</a> <a href="/tags/JVM/" style="font-size: 20px;">JVM</a> <a href="/tags/Java/" style="font-size: 20px;">Java</a> <a href="/tags/Java%E5%B9%B6%E5%8F%91/" style="font-size: 16.67px;">Java并发</a> <a href="/tags/Linux/" style="font-size: 13.33px;">Linux</a> <a href="/tags/Maven/" style="font-size: 10px;">Maven</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 13.33px;">算法</a> <a href="/tags/%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B/" style="font-size: 13.33px;">网络编程</a>
  </div>
</div>

</aside>
    <div class="clearfix"></div>
  </div>
  <footer id="footer" class="inner"><div class="alignleft">
  
  &copy; 2020 jony
  
</div>
<div class="clearfix"></div></footer>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>



</body>
</html>

